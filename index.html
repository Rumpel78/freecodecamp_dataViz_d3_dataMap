<!DOCTYPE html>
<html>

<style>
    .country {
        fill: #aaa;
        stroke: #fff;
        stroke-width: 0.2px;
    }

    .meteor {
        fill: red;
        opacity: .5;
    }

    .meteor:hover {
        fill: red;
        opacity: 1;
    }
</style>

<body>
    <h1>Meteorite strikes</h1>
    <div id="worldMap">
    </div>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script>
    <script>
        var path = d3.geoPath(d3.geoMercator()),
            width = 960,
            height = 500;

        var svg = d3.select("#worldMap").append("svg")
            .attr("width", width)
            .attr("height", height);

        // draw world map
        d3.json("./world-110m.json", function (error, world) {
            if (error) throw error;

            var geojson = topojson.feature(world, world.objects.countries)

            svg.selectAll("path")
                .data(geojson.features)
                .enter().append("path")
                .attr("d", path)
                .attr("class", "country");
        });

        d3.json("./meteorite-strike-data.json", function (error, meteorite) {
            if (error) throw error;

            var scale = d3.scaleSqrt().domain([0, 1000000]).range([2, 7]);
            var circlePath = d3.geoPath(d3.geoMercator()).pointRadius(m => scale(m.properties.mass))

            svg.selectAll("path")
                .data(meteorite.features)
                .enter().append("path")
                .attr("d", circlePath)
                .attr("class", "meteor");
        });
    </script>
</body>

</html>